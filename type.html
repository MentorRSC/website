<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typing Lessons | Innovation Hub</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Common Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #1a73e8;
            --secondary: #34a853;
            --accent: #fbbc04;
            --dark: #202124;
            --light: #f8f9fa;
            --text: #5f6368;
            --white: #ffffff;
            --shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            --danger: #e74c3c;
        }

        body {
            background-color: #f5f7fa;
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: 0 auto;
        }

        /* Header Styles */
        header {
            background-color: var(--white);
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .logo {
            display: flex;
            align-items: center;
            text-decoration: none;
        }

        .logo i {
            font-size: 32px;
            color: var(--primary);
            margin-right: 10px;
        }

        .logo h1 {
            font-size: 24px;
            color: var(--dark);
        }

        .logo span {
            color: var(--primary);
        }

        nav ul {
            display: flex;
            list-style: none;
        }

        nav ul li {
            margin-left: 25px;
        }

        nav ul li a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            transition: color 0.3s;
        }

        nav ul li a:hover {
            color: var(--primary);
        }

        .cta-button {
            background-color: var(--primary);
            color: var(--white);
            padding: 10px 20px;
            border-radius: 5px;
            text-decoration: none;
            font-weight: 600;
            transition: background-color 0.3s;
        }

        .cta-button:hover {
            background-color: #0d5bbb;
        }

        .mobile-menu {
            display: none;
            font-size: 24px;
            cursor: pointer;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: 40px 0;
        }

        /* Footer */
        footer {
            background-color: var(--dark);
            color: var(--white);
            padding: 60px 0 20px;
            margin-top: auto;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-column h3 {
            font-size: 1.3rem;
            margin-bottom: 20px;
            position: relative;
            padding-bottom: 10px;
        }

        .footer-column h3:after {
            content: '';
            position: absolute;
            left: 0;
            bottom: 0;
            width: 40px;
            height: 3px;
            background-color: var(--primary);
        }

        .footer-column ul {
            list-style: none;
        }

        .footer-column ul li {
            margin-bottom: 10px;
        }

        .footer-column ul li a {
            color: #bbb;
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-column ul li a:hover {
            color: var(--white);
        }

        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .social-links a {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            color: var(--white);
            transition: background-color 0.3s;
            text-decoration: none;
        }

        .social-links a:hover {
            background-color: var(--primary);
        }

        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #bbb;
            font-size: 0.9rem;
        }

        /* Responsive Styles */
        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                text-align: center;
            }

            nav ul {
                margin-top: 20px;
                flex-wrap: wrap;
                justify-content: center;
            }

            nav ul li {
                margin: 5px 10px;
            }

            .mobile-menu {
                display: block;
                position: absolute;
                top: 20px;
                right: 20px;
            }

            .nav-menu {
                display: none;
                width: 100%;
            }

            .nav-menu.active {
                display: block;
            }
        }

        /* Typing Lessons Styles */
        .page-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .page-header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: var(--primary);
        }
        
        .page-header p {
            font-size: 1.2rem;
            color: var(--text);
            max-width: 600px;
            margin: 0 auto;
        }
        
        .typing-container {
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
            margin-bottom: 40px;
        }
        
        .typing-section {
            flex: 2;
            min-width: 500px;
            background: var(--white);
            border-radius: 10px;
            padding: 25px;
            box-shadow: var(--shadow);
        }
        
        .stats-section {
            flex: 1;
            min-width: 300px;
            background: var(--white);
            border-radius: 10px;
            padding: 25px;
            box-shadow: var(--shadow);
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .text-display {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            font-size: 1.2rem;
            line-height: 1.8;
            min-height: 150px;
            border: 1px solid #e0e0e0;
        }
        
        .current-word {
            background-color: var(--primary);
            color: white;
            padding: 2px 5px;
            border-radius: 3px;
        }
        
        .correct {
            color: var(--secondary);
        }
        
        .incorrect {
            color: var(--danger);
            text-decoration: underline;
        }
        
        .typing-input {
            width: 100%;
            padding: 15px;
            font-size: 1.2rem;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            margin-bottom: 20px;
            transition: border-color 0.3s;
        }
        
        .typing-input:focus {
            outline: none;
            border-color: var(--primary);
        }
        
        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 12px 24px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
            background: #0d5bbb;
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn-secondary {
            background: var(--secondary);
        }
        
        .btn-secondary:hover {
            background: #2d9c4d;
        }
        
        .btn-warning {
            background: var(--accent);
        }
        
        .btn-warning:hover {
            background: #e6a403;
        }
        
        .lesson-selector {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        
        .lesson-btn {
            padding: 10px 20px;
            background: #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            color: var(--text);
        }
        
        .lesson-btn.active {
            background: var(--primary);
            color: white;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .lesson-btn:hover:not(.active) {
            background: #d0d0d0;
        }
        
        .stats-card {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }
        
        .stats-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 5px;
        }
        
        .stats-label {
            font-size: 1rem;
            color: var(--text);
        }
        
        .keyboard {
            margin-top: 30px;
            background: #f0f0f0;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .keyboard-row {
            display: flex;
            justify-content: center;
            margin-bottom: 10px;
        }
        
        .key {
            width: 50px;
            height: 50px;
            margin: 0 5px;
            background: white;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: all 0.2s;
        }
        
        .key.active {
            background: var(--primary);
            color: white;
            transform: translateY(2px);
        }
        
        .key.special {
            background: #e0e0e0;
        }
        
        .key.space {
            width: 300px;
        }
        
        .progress-container {
            margin-top: 20px;
        }
        
        .progress-bar {
            height: 10px;
            background: #e0e0e0;
            border-radius: 5px;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background: var(--primary);
            width: 0%;
            transition: width 0.3s;
        }
        
        .progress-text {
            display: flex;
            justify-content: space-between;
            margin-top: 5px;
            font-size: 0.9rem;
            color: var(--text);
        }
        
        .instructions {
            background: var(--white);
            border-radius: 10px;
            padding: 25px;
            box-shadow: var(--shadow);
            margin-top: 30px;
        }
        
        .instructions h3 {
            margin-bottom: 15px;
            color: var(--primary);
        }
        
        .instructions ul {
            padding-left: 20px;
            margin-bottom: 15px;
        }
        
        .instructions li {
            margin-bottom: 10px;
            color: var(--text);
        }
        
        @media (max-width: 768px) {
            .typing-container {
                flex-direction: column;
            }
            
            .typing-section, .stats-section {
                min-width: 100%;
            }
            
            .key {
                width: 30px;
                height: 40px;
                font-size: 0.8rem;
            }
            
            .key.space {
                width: 200px;
            }
            
            .page-header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header Section -->
    <header>
        <div class="container header-container">
            <a href="index.html" class="logo">
                <i class="fas fa-lightbulb"></i>
                <h1>Innovation<span>Hub</span></h1>
            </a>
            <div class="mobile-menu">
                <i class="fas fa-bars"></i>
            </div>
            <nav class="nav-menu">
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="https://rscpcalicut.org.in/">Parent</a></li>
                    <li><a href="resources.html">Resources</a></li>
                    <li><a href="projects.html">Projects</a></li>
                    <li><a href="puzzles.html" class="active">Puzzles</a></li>
                    <li><a href="https://docs.google.com/forms/d/e/1FAIpQLSev3gYFPXHilQ4mj8lDwT_a7tHSGJmdhbSqok0Y4kVqM1yl1w/viewform?usp=dialog" class="cta-button">Join Now</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <div class="page-header">
                <h1>Typing Lessons</h1>
                <p>Improve your typing speed and accuracy with our interactive typing tutor</p>
            </div>
            
            <div class="typing-container">
                <div class="typing-section">
                    <div class="lesson-selector">
                        <div class="lesson-btn active" data-level="beginner">Beginner</div>
                        <div class="lesson-btn" data-level="intermediate">Intermediate</div>
                        <div class="lesson-btn" data-level="advanced">Advanced</div>
                        <div class="lesson-btn" data-level="numbers">Numbers & Symbols</div>
                    </div>
                    
                    <div class="text-display" id="text-display">
                        <!-- Text to type will be inserted here -->
                    </div>
                    
                    <input type="text" class="typing-input" id="typing-input" placeholder="Start typing here...">
                    
                    <div class="controls">
                        <button class="btn" id="start-btn">Start Lesson</button>
                        <button class="btn btn-secondary" id="reset-btn">Reset</button>
                        <button class="btn btn-warning" id="hint-btn">Show Hint</button>
                    </div>
                    
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress" id="progress-bar"></div>
                        </div>
                        <div class="progress-text">
                            <span>Progress: <span id="progress-text">0%</span></span>
                            <span>Time: <span id="time-text">0s</span></span>
                        </div>
                    </div>
                    
                    <div class="keyboard">
                        <div class="keyboard-row">
                            <div class="key" data-key="`">`</div>
                            <div class="key" data-key="1">1</div>
                            <div class="key" data-key="2">2</div>
                            <div class="key" data-key="3">3</div>
                            <div class="key" data-key="4">4</div>
                            <div class="key" data-key="5">5</div>
                            <div class="key" data-key="6">6</div>
                            <div class="key" data-key="7">7</div>
                            <div class="key" data-key="8">8</div>
                            <div class="key" data-key="9">9</div>
                            <div class="key" data-key="0">0</div>
                            <div class="key" data-key="-">-</div>
                            <div class="key" data-key="=">=</div>
                            <div class="key special" data-key="backspace">âŒ«</div>
                        </div>
                        <div class="keyboard-row">
                            <div class="key special" data-key="tab">Tab</div>
                            <div class="key" data-key="q">Q</div>
                            <div class="key" data-key="w">W</div>
                            <div class="key" data-key="e">E</div>
                            <div class="key" data-key="r">R</div>
                            <div class="key" data-key="t">T</div>
                            <div class="key" data-key="y">Y</div>
                            <div class="key" data-key="u">U</div>
                            <div class="key" data-key="i">I</div>
                            <div class="key" data-key="o">O</div>
                            <div class="key" data-key="p">P</div>
                            <div class="key" data-key="[">[</div>
                            <div class="key" data-key="]">]</div>
                            <div class="key" data-key="\\">\</div>
                        </div>
                        <div class="keyboard-row">
                            <div class="key special" data-key="capslock">Caps</div>
                            <div class="key" data-key="a">A</div>
                            <div class="key" data-key="s">S</div>
                            <div class="key" data-key="d">D</div>
                            <div class="key" data-key="f">F</div>
                            <div class="key" data-key="g">G</div>
                            <div class="key" data-key="h">H</div>
                            <div class="key" data-key="j">J</div>
                            <div class="key" data-key="k">K</div>
                            <div class="key" data-key="l">L</div>
                            <div class="key" data-key=";">;</div>
                            <div class="key" data-key="'">'</div>
                            <div class="key special" data-key="enter">Enter</div>
                        </div>
                        <div class="keyboard-row">
                            <div class="key special" data-key="shift">Shift</div>
                            <div class="key" data-key="z">Z</div>
                            <div class="key" data-key="x">X</div>
                            <div class="key" data-key="c">C</div>
                            <div class="key" data-key="v">V</div>
                            <div class="key" data-key="b">B</div>
                            <div class="key" data-key="n">N</div>
                            <div class="key" data-key="m">M</div>
                            <div class="key" data-key=",">,</div>
                            <div class="key" data-key=".">.</div>
                            <div class="key" data-key="/">/</div>
                            <div class="key special" data-key="shift">Shift</div>
                        </div>
                        <div class="keyboard-row">
                            <div class="key space" data-key=" ">Space</div>
                        </div>
                    </div>
                </div>
                
                <div class="stats-section">
                    <div class="stats-card">
                        <div class="stats-value" id="wpm">0</div>
                        <div class="stats-label">Words Per Minute</div>
                    </div>
                    
                    <div class="stats-card">
                        <div class="stats-value" id="accuracy">0%</div>
                        <div class="stats-label">Accuracy</div>
                    </div>
                    
                    <div class="stats-card">
                        <div class="stats-value" id="errors">0</div>
                        <div class="stats-label">Errors</div>
                    </div>
                    
                    <div class="stats-card">
                        <div class="stats-value" id="time">0s</div>
                        <div class="stats-label">Time Elapsed</div>
                    </div>
                </div>
            </div>
            
            <div class="instructions">
                <h3>How to Use the Typing Tutor</h3>
                <ul>
                    <li>Select a difficulty level to get started</li>
                    <li>Click "Start Lesson" to begin the typing exercise</li>
                    <li>Type the text shown in the display area as accurately as possible</li>
                    <li>Your progress will be tracked in real-time</li>
                    <li>Try to improve your words per minute (WPM) and accuracy over time</li>
                    <li>Use the virtual keyboard to see which keys to press</li>
                </ul>
                <p><strong>Tips for Improvement:</strong></p>
                <ul>
                    <li>Maintain proper posture with your back straight</li>
                    <li>Keep your fingers on the home row (ASDF JKL;)</li>
                    <li>Use all fingers, not just your index fingers</li>
                    <li>Practice regularly for best results</li>
                </ul>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>Innovation <span>Hub</span></h3>
                    <p>Empowering students to transform ideas into reality through resources, mentorship, and collaborative spaces.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook-f"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin-in"></i></a>
                    </div>
                </div>
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="https://rscpcalicut.org.in/">Programs</a></li>
                        <li><a href="resources.html">Resources</a></li>
                        <li><a href="projects.html">Projects Gallery</a></li>
                        <li><a href="https://rscpcalicut.org.in/">Events</a></li>
                        <li><a href="https://docs.google.com/forms/d/e/1FAIpQLSev3gYFPXHilQ4mj8lDwT_a7tHSGJmdhbSqok0Y4kVqM1yl1w/viewform?usp=dialog">Join Now</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Learning Resources</h3>
                    <ul>
                        <li><a href="typing-lessons.html">Typing Lessons</a></li>
                        <li><a href="sudoku.html">Sudoku</a></li>
                        <li><a href="tower-of-hanoi.html">Tower of Hanoi</a></li>
                        <li><a href="programming.html">Programming Tutorials</a></li>
                        <li><a href="science-experiments.html">Science Experiments</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Contact Us</h3>
                    <ul>
                        <li><i class="fas fa-map-marker-alt"></i> Innovation Hub, Regional Science Centre and Planetarium, Calicut</li>
                        <li><i class="fas fa-phone"></i> 0495 2770571</li>
                        <li><i class="fas fa-envelope"></i> mentor2hubrsc@gmail.com</li>
                        <li><i class="fas fa-clock"></i> TUESDAY - SUNDAY: 11AM-4PM</li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Regional Science Centre and Planetarium, Calicut. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Mobile menu toggle
            const mobileMenu = document.querySelector('.mobile-menu');
            const navMenu = document.querySelector('.nav-menu');
            
            mobileMenu.addEventListener('click', function() {
                navMenu.classList.toggle('active');
            });
            
            // Close menu when clicking outside
            document.addEventListener('click', function(event) {
                if (!event.target.closest('.header-container')) {
                    navMenu.classList.remove('active');
                }
            });

            // Typing Tutor Elements
            const textDisplay = document.getElementById('text-display');
            const typingInput = document.getElementById('typing-input');
            const startBtn = document.getElementById('start-btn');
            const resetBtn = document.getElementById('reset-btn');
            const hintBtn = document.getElementById('hint-btn');
            const lessonBtns = document.querySelectorAll('.lesson-btn');
            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-text');
            const timeText = document.getElementById('time-text');
            const wpmElement = document.getElementById('wpm');
            const accuracyElement = document.getElementById('accuracy');
            const errorsElement = document.getElementById('errors');
            const timeElement = document.getElementById('time');
            const keys = document.querySelectorAll('.key');
            
            // Typing Tutor State
            let currentLesson = 'beginner';
            let currentText = '';
            let typedText = '';
            let startTime = null;
            let timerInterval = null;
            let errors = 0;
            let totalChars = 0;
            let correctChars = 0;
            let isActive = false;
            
            // Lesson Texts
            const lessonTexts = {
                beginner: [
                    "The quick brown fox jumps over the lazy dog.",
                    "Practice makes perfect when learning to type.",
                    "Keep your fingers on the home row keys.",
                    "Type with rhythm and maintain a steady pace."
                ],
                intermediate: [
                    "Programming is the process of creating a set of instructions that tell a computer how to perform a task.",
                    "Innovation Hub provides resources for students to explore science and technology.",
                    "Typing quickly and accurately is an essential skill in the digital age.",
                    "Regular practice will significantly improve your typing speed over time."
                ],
                advanced: [
                    "The phenomenal advancement of technology has revolutionized how we communicate and access information in contemporary society.",
                    "Quantum computing represents a paradigm shift in computational capabilities that could solve problems intractable for classical computers.",
                    "Interdisciplinary collaboration between scientists, engineers, and designers fosters innovative solutions to complex global challenges.",
                    "Metacognitive strategies enable learners to monitor their comprehension and adapt their approaches to problem-solving effectively."
                ],
                numbers: [
                    "The numbers 12345 and symbols !@#$% are important for passwords.",
                    "Calculate 98.7 + 42.3 = 141.0 using the number keys.",
                    "My phone number is 555-123-4567 and PIN is 90210.",
                    "Use shift+1 for !, shift+2 for @, and shift+3 for # symbols."
                ]
            };
            
            // Initialize the typing tutor
            function initializeTutor() {
                loadLesson(currentLesson);
                updateStats();
                typingInput.value = '';
                typingInput.disabled = true;
                isActive = false;
            }
            
            // Load a lesson
            function loadLesson(level) {
                currentLesson = level;
                const texts = lessonTexts[level];
                currentText = texts[Math.floor(Math.random() * texts.length)];
                renderText();
                resetStats();
            }
            
            // Render the text to type
            function renderText() {
                textDisplay.innerHTML = '';
                const words = currentText.split(' ');
                
                words.forEach((word, wordIndex) => {
                    const wordSpan = document.createElement('span');
                    wordSpan.className = 'word';
                    
                    // Add each character
                    for (let i = 0; i < word.length; i++) {
                        const charSpan = document.createElement('span');
                        charSpan.textContent = word[i];
                        wordSpan.appendChild(charSpan);
                    }
                    
                    // Add space after word (except last word)
                    if (wordIndex < words.length - 1) {
                        const spaceSpan = document.createElement('span');
                        spaceSpan.textContent = ' ';
                        spaceSpan.className = 'space';
                        wordSpan.appendChild(spaceSpan);
                    }
                    
                    textDisplay.appendChild(wordSpan);
                });
                
                // Highlight first word
                highlightCurrentWord(0);
            }
            
            // Highlight the current word
            function highlightCurrentWord(wordIndex) {
                const words = textDisplay.querySelectorAll('.word');
                words.forEach((word, index) => {
                    if (index === wordIndex) {
                        word.classList.add('current-word');
                    } else {
                        word.classList.remove('current-word');
                    }
                });
            }
            
            // Start the typing lesson
            function startLesson() {
                if (isActive) return;
                
                isActive = true;
                typingInput.disabled = false;
                typingInput.focus();
                startTime = new Date();
                timerInterval = setInterval(updateTimer, 1000);
                startBtn.textContent = 'Pause';
            }
            
            // Pause the typing lesson
            function pauseLesson() {
                isActive = false;
                typingInput.disabled = true;
                clearInterval(timerInterval);
                startBtn.textContent = 'Resume';
            }
            
            // Reset the typing lesson
            function resetLesson() {
                isActive = false;
                typingInput.disabled = true;
                clearInterval(timerInterval);
                startBtn.textContent = 'Start Lesson';
                typedText = '';
                typingInput.value = '';
                resetStats();
                renderText();
            }
            
            // Reset statistics
            function resetStats() {
                errors = 0;
                totalChars = 0;
                correctChars = 0;
                startTime = null;
                updateStats();
                updateProgress(0);
                updateTimerDisplay(0);
            }
            
            // Update statistics
            function updateStats() {
                const elapsedTime = startTime ? (new Date() - startTime) / 1000 : 0;
                const minutes = elapsedTime / 60;
                
                // Calculate WPM (words are 5 characters)
                const wpm = minutes > 0 ? Math.round((correctChars / 5) / minutes) : 0;
                wpmElement.textContent = wpm;
                
                // Calculate accuracy
                const accuracy = totalChars > 0 ? Math.round((correctChars / totalChars) * 100) : 0;
                accuracyElement.textContent = `${accuracy}%`;
                
                // Update errors
                errorsElement.textContent = errors;
                
                // Update time
                timeElement.textContent = `${Math.round(elapsedTime)}s`;
            }
            
            // Update progress
            function updateProgress(percent) {
                progressBar.style.width = `${percent}%`;
                progressText.textContent = `${percent}%`;
            }
            
            // Update timer display
            function updateTimerDisplay(seconds) {
                timeText.textContent = `${seconds}s`;
            }
            
            // Update timer
            function updateTimer() {
                if (!startTime) return;
                
                const elapsedTime = Math.floor((new Date() - startTime) / 1000);
                updateTimerDisplay(elapsedTime);
                updateStats();
            }
            
            // Handle typing input
            function handleTypingInput() {
                if (!isActive) return;
                
                typedText = typingInput.value;
                totalChars = typedText.length;
                
                // Calculate correct characters
                correctChars = 0;
                errors = 0;
                
                for (let i = 0; i < typedText.length; i++) {
                    if (typedText[i] === currentText[i]) {
                        correctChars++;
                    } else {
                        errors++;
                    }
                }
                
                // Update text display with correctness
                updateTextDisplay();
                
                // Update progress
                const progress = Math.min(100, Math.round((typedText.length / currentText.length) * 100));
                updateProgress(progress);
                
                // Check if lesson is complete
                if (typedText.length === currentText.length) {
                    if (typedText === currentText) {
                        // Lesson completed successfully
                        pauseLesson();
                        setTimeout(() => {
                            alert('Congratulations! You completed the lesson!');
                            resetLesson();
                        }, 500);
                    }
                }
                
                updateStats();
            }
            
            // Update text display with correctness
            function updateTextDisplay() {
                const chars = textDisplay.querySelectorAll('span:not(.space)');
                
                chars.forEach((charSpan, index) => {
                    if (index < typedText.length) {
                        if (typedText[index] === currentText[index]) {
                            charSpan.className = 'correct';
                        } else {
                            charSpan.className = 'incorrect';
                        }
                    } else {
                        charSpan.className = '';
                    }
                });
                
                // Find current word index
                const typedWords = typedText.split(' ');
                const currentWordIndex = typedWords.length - 1;
                highlightCurrentWord(currentWordIndex);
            }
            
            // Show hint (next character)
            function showHint() {
                if (!isActive || typedText.length >= currentText.length) return;
                
                const nextChar = currentText[typedText.length];
                typingInput.value += nextChar;
                handleTypingInput();
            }
            
            // Highlight key on keyboard
            function highlightKey(key) {
                keys.forEach(k => {
                    if (k.dataset.key === key.toLowerCase()) {
                        k.classList.add('active');
                        setTimeout(() => {
                            k.classList.remove('active');
                        }, 200);
                    }
                });
            }
            
            // Event Listeners
            startBtn.addEventListener('click', function() {
                if (isActive) {
                    pauseLesson();
                } else {
                    startLesson();
                }
            });
            
            resetBtn.addEventListener('click', resetLesson);
            
            hintBtn.addEventListener('click', showHint);
            
            lessonBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    lessonBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    loadLesson(this.dataset.level);
                });
            });
            
            typingInput.addEventListener('input', handleTypingInput);
            
            typingInput.addEventListener('keydown', function(e) {
                highlightKey(e.key);
            });
            
            // Initialize the typing tutor
            initializeTutor();
        });
    </script>
</body>
</html>
